---
datatype: string
default: >
  /* {"app": "dbt", "dbt_version": "0.15.0rc2", "profile_name": "debug", "target_name": "dev", "node_id": "model.dbt2.my_model"} */
---

## Definition
A string to inject as a comment at the top of each query that dbt runs against your database. This comment can be used to attribute SQL statements to specific dbt resources like models and tests.

The `query-comment` configuration can also call a macro that returns a string.

By default, dbt will add a JSON comment containing the information including the dbt version, profile and target names, and node ids for the resources it runs. For example:

```sql
/* {"app": "dbt", "dbt_version": "0.15.0rc2", "profile_name": "debug",
    "target_name": "dev", "node_id": "model.dbt2.my_model"} */

create view analytics.analytics.orders as (
    select ...
  );
```

## Examples

### Inject a static comment
The following example injects a comment that reads `/* executed by dbt */` into the header of the SQL queries that dbt runs.

<File name='dbt_project.yml'>

```yml
query-comment: "executed by dbt"

```

</File>

**Example output:**

```sql
/* executed by dbt */

select ...
```

### Disable query comments

<File name='dbt_project.yml'>

```yml
query-comment:

```

</File>

Or:

<File name='dbt_project.yml'>

```yml
query-comment: null

```

</File>

### Inject a dynamic comment
The following example injects a comment that varies based on the configured `user` specified in the active dbt target.

<File name='dbt_project.yml'>

```yml
query-comment: "run by {{ target.user }} in dbt"

```

</File>

**Example output:**

```sql
/* run by drew in dbt */

select ...
```

### Use a macro to generate a comment

The `query-comment` config can reference macros in your dbt project.

<File name='macros/query_comment.sql'>

```jinja2

{% macro query_comment() %}

  dbt {{ dbt_version }}: running {{ node.unique_id }} for target {{ target.name }}

{% endmacro %}
```

</File>

<File name='dbt_project.yml'>

```yaml
query-comment: "{{ query_comment() }}"

```

</File>

## Compilation context

The following context variables are available when generating a query comment:

| Context Variable | Description |
| ---------------- | ----------- |
| dbt_version | The version of dbt being used |
| env_var | See [env_var](env_var) |
| modules | See [modules](modules) |
| run_started_at | When the dbt invocation began |
| invocation_id | A unique ID for the dbt invocation |
| fromjson | See [fromjson](fromjson) |
| tojson | See [tojson](tojson) |
| log | See [log](log) |
| var | See [var](var) |
| target | See [target](target) |
| connection_name | A string representing the internal name for the connection. This string is generated by dbt. |
| node | A dictionary representation of the parsed node object. Use `node.unique_id`, `node.database`, `node.schema`, etc |
